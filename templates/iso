
if [[ -z $ISO_TYPE ]]; then
    # default
    ISO_TYPE='cdemu'
    
    # guess :)
    [[ -n $MOUNTTARGET ]] && ISO_TYPE='fuseiso'
    [[ -n $CDEMU_NO ]] && ISO_TYPE='cdemu'
fi

case $ISO_TYPE in
    'fuseiso') inherit fuseiso;;
    'cdemu')   inherit cdemu;;
    *) die "Unknown ISO_TYPE: '$ISO_TYPE'";;
esac


# wrapper phases

iso_prepare () {
    ${ISO_TYPE}_prepare
}

iso_cleanup () {
    ${ISO_TYPE}_cleanup
}

EXPORT prepare cleanup
# vim:ft=sh
